<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Event in Firebase</title>
    <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        .form-group {
            margin-bottom: 10px;
        }

        label {
            font-weight: bold;
        }

        input[type="text"],
        input[type="date"],
        input[type="email"],
        input[type="number"] {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        button {
            padding: 10px 15px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background-color: #218838;
        }

        #message {
            margin-top: 15px;
            color: green;
        }

        #message.error {
            color: red;
        }
    </style>
</head>

<body>

    <h1>Edit Event</h1>

    <form id="editForm">
        <div class="form-group">
            <label for="SNo">Serial Number:</label>
            <input type="number" id="SNo" placeholder="Enter Serial Number to Edit" required>
        </div>
        <div class="form-group">
            <label for="Name">Event Name:</label>
            <input type="text" id="Name" required>
        </div>
        <div class="form-group">
            <label for="G_Name">Group Name:</label>
            <input type="text" id="G_Name" required>
        </div>
        <div class="form-group">
            <label for="Event">Event Type:</label>
            <input type="text" id="Event" required>
        </div>
        <div class="form-group">
            <label for="Date">Date:</label>
            <input type="date" id="Date" required>
        </div>
        <div class="form-group">
            <label for="Email">Email:</label>
            <input type="email" id="Email" required>
        </div>
        <div class="form-group">
            <label for="Remarks">Remarks:</label>
            <input type="text" id="Remarks" required>
        </div>
        <button type="submit">Update Event</button>
    </form>

    <div id="message"></div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            databaseURL: "YOUR_DATABASE_URL",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID",
            measurementId: "YOUR_MEASUREMENT_ID"
        };

        // Initialize Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Get references to form and message area
        const editForm = document.getElementById("editForm");
        const messageArea = document.getElementById("message");

        // Handle form submission
        editForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            const eventSNo = parseInt(document.getElementById("SNo").value);
            const eventName = document.getElementById("Name").value;
            const eventG_Name = document.getElementById("G_Name").value;
            const eventEvent = document.getElementById("Event").value;
            const eventDate = document.getElementById("Date").value;
            const eventEmail = document.getElementById("Email").value;
            const eventRemarks = document.getElementById("Remarks").value;

            if (isNaN(eventSNo)) {
                showMessage("Please enter a valid Serial Number.", "error");
                return;
            }

            try {
                // Query Firestore for the event by SNo
                const eventRef = db.collection("Event").where("SNo", "==", eventSNo);
                const querySnapshot = await eventRef.get();

                if (querySnapshot.empty) {
                    showMessage("Event not found for the given Serial Number.", "error");
                } else {
                    const docRef = querySnapshot.docs[0].ref; // Get reference of the first matching document

                    // Update the document with new data
                    await docRef.update({
                        Name: eventName,
                        G_Name: eventG_Name,
                        Event: eventEvent,
                        Date: eventDate,
                        Email: eventEmail,
                        Remarks: eventRemarks
                    });

                    document.getElementById('editForm').reset();
                    showMessage("Event updated successfully!");
                }
            } catch (error) {
                console.error("Error updating event:", error);
                showMessage("Error updating event. Please try again.", "error");
            }
        });

        // Helper function to show messages
        function showMessage(message, type = "success") {
            messageArea.textContent = message;
            messageArea.classList.remove("error", "success");
            messageArea.classList.add(type);
        }
    </script>

</body>

</html>

